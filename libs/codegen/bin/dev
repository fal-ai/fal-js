#!/usr/bin/env node

const oclif = require("@oclif/core");
const path = require("path");

// Get project config
const project = path.join(__dirname, "..", "tsconfig.lib.json");
process.env.TS_NODE_PROJECT = project;

// In dev mode -> use ts-node and dev plugins
process.env.NODE_ENV = "development";

// Register ts-node and path mapping
require("ts-node").register({ project, esm: true });
require("tsconfig-paths").register();

// In dev mode, always show stack traces
oclif.settings.debug = true;

// Start the CLI
oclif.run()
  .then(oclif.flush)
  .catch(oclif.Errors.handle);
